<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Maven," />










<meta name="description" content="简介什么是Mavenmaven这个单词的翻译为“专家”或“内行”。作为我们开发过程中使用的工具而言，Maven是一个跨平台的项目管理工具，并且是Apache组织中的开源项目之一，主要用于Java平台的项目构建，依赖管理和项目信息管理等。它是一个异常强大的构建工具，能够帮助我们自动化构建过程，从清理，编译，测试到生产报告，再到打包和部署，我们只需要使用maven配置好项目，然后输入简单的命令，mav">
<meta property="og:type" content="article">
<meta property="og:title" content="Maven学习笔记">
<meta property="og:url" content="http://yoursite.com/2017/06/21/Maven学习笔记/index.html">
<meta property="og:site_name" content="Qiu Homepage">
<meta property="og:description" content="简介什么是Mavenmaven这个单词的翻译为“专家”或“内行”。作为我们开发过程中使用的工具而言，Maven是一个跨平台的项目管理工具，并且是Apache组织中的开源项目之一，主要用于Java平台的项目构建，依赖管理和项目信息管理等。它是一个异常强大的构建工具，能够帮助我们自动化构建过程，从清理，编译，测试到生产报告，再到打包和部署，我们只需要使用maven配置好项目，然后输入简单的命令，mav">
<meta property="og:updated_time" content="2017-10-21T05:33:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Maven学习笔记">
<meta name="twitter:description" content="简介什么是Mavenmaven这个单词的翻译为“专家”或“内行”。作为我们开发过程中使用的工具而言，Maven是一个跨平台的项目管理工具，并且是Apache组织中的开源项目之一，主要用于Java平台的项目构建，依赖管理和项目信息管理等。它是一个异常强大的构建工具，能够帮助我们自动化构建过程，从清理，编译，测试到生产报告，再到打包和部署，我们只需要使用maven配置好项目，然后输入简单的命令，mav">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/06/21/Maven学习笔记/"/>





  <title>Maven学习笔记 | Qiu Homepage</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Qiu Homepage</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/21/Maven学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lujunqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qiu Homepage">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Maven学习笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-21T13:04:37+08:00">
                2017-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="什么是Maven"><a href="#什么是Maven" class="headerlink" title="什么是Maven"></a>什么是Maven</h2><p>maven这个单词的翻译为“专家”或“内行”。作为我们开发过程中使用的工具而言，Maven是一个跨平台的项目管理工具，并且是Apache组织中的开源项目之一，主要用于Java平台的项目构建，依赖管理和项目信息管理等。它是一个异常强大的构建工具，能够帮助我们自动化构建过程，从清理，编译，测试到生产报告，再到打包和部署，我们只需要使用maven配置好项目，然后输入简单的命令，maven会帮我们处理这些繁琐的任务。<br><a id="more"></a><br>maven是跨平台的，这意味着无论是windows上还是在linux,mac上的项目都可以使用同样的命令。同时，maven不仅仅是构建工具，还是一个依赖管理工具和项目信息管理个工具，可以帮助我们自动下载项目所需要的构件。</p>
<p>maven对于项目目录结构，测试用例命名方法等内容都有既定的规则，只要遵循了这些成熟的规则，我们在不同的项目切换的时候就免去了额外的学习成本，上手就容易许多，可以说是约定优于配置(Convention over Configuration)。</p>
<h2 id="Maven的安装-Ubantu"><a href="#Maven的安装-Ubantu" class="headerlink" title="Maven的安装(Ubantu)"></a>Maven的安装(Ubantu)</h2><ol>
<li><p>检查系统的java环境变量配置是否成功</p>
<p> qiu@qiu-qiu:~$ echo $JAVA_HOME</p>
<p> qiu@qiu-qiu:~$ java -version</p>
</li>
<li><p>java环境配置成功后，下载maven:<a href="http://maven.apache.org/download.cgi" target="_blank" rel="external">http://maven.apache.org/download.cgi</a></p>
</li>
<li><p>配置maven的环境变量:</p>
<p> 解压安装包后，到解压出来的maven文件的目录下创建一个符号链接，方便更新：</p>
<p> qiu@qiu-qiu:~$ ln -s apache-maven-3.5.0 apache-maven</p>
<p> 设置M2_HOME变量指向这个符号链接，然后将符号链接中的bin目录添加进系统的PATH变量:</p>
<p> qiu@qiu-qiu:~$ sudo vi /etc/profile</p>
<p> 添加以下几行：</p>
<p> export M2_HOME=/home/qiu/maven/apache-maven</p>
<p> export PATH=$PATH:$M2_HOME/bin</p>
<p> 最后更新配置文件:</p>
<p>　qiu@qiu-qiu:~$ source /etc/profile</p>
</li>
<li><p>检查是否安装成功</p>
<p>  qiu@qiu-qiu:~$ mvn -v</p>
</li>
</ol>
<p>输出：</p>
<p>Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-04T03:39:06+08:00)<br>Maven home: /home/qiu/maven/apache-maven<br>Java version: 1.8.0_131, vendor: Oracle Corporation<br>Java home: /usr/jdk1.8.0_131/jre<br>Default locale: zh_CN, platform encoding: UTF-8<br>OS name: “linux”, version: “4.8.0-49-generic”, arch: “amd64”, family: “unix”</p>
<p>关于maven的升级：由于我们之前平行地创建了一个符号链接，然后在配置环境变量的时候使用的是这个符号链接，于是在升级的时候就可以利用这个符号链接了。我们只需要将符号链接指向新的maven版本即可。</p>
<p>在IDEA(版本：2017.1.2)开发环境中搭建maven：<br>在Settings—Build,Execution,Deployment—Build Tools—Maven中设置Maven home directory;   User settings file;   Local repository即可。</p>
<h1 id="maven的使用"><a href="#maven的使用" class="headerlink" title="maven的使用"></a>maven的使用</h1><h2 id="POM文件"><a href="#POM文件" class="headerlink" title="POM文件"></a>POM文件</h2><p>maven项目的核心是pom.xml。POM(Project Object Model，项目对象模型)定义了项目的基本信息，用于描述项目是如何构建的，声明项目依赖，等等。</p>
<p>pom.xml文件里面元素介绍：<br>首先是XML头，指定了该xml文件的版本以及编码方式。紧接着是project元素，project元素是所有pom.xml的根元素，它还声明了一些POM相关的命名空间以及xsd元素。根元素下的第一个子元素是modelVersion指定了当前POM模型的版本。接下来介绍３个重要的元素标签：<br>groupId,artifactId,version。这３个元素定义了一个项目的基本坐标，在maven世界中，任何的jar,pom或者war都是以基于这些基本的坐标进行区分的。</p>
<p>groupId定义了项目属于哪个组，这个组往往和项目所在的组织有关。artifactId定义了当前maven项目在组中唯一的ID。version，顾名思义，指定了当前项目的版本号。最后还可以为项目设定name元素，声明一个对于用户更为友好的项目名称。</p>
<p>dependencies元素声明项目的依赖(java代码中的import)，该元素下可以包含多个dependency元素，里面包含所依赖的构件的mavan坐标。</p>
<p>没有任何实际的java代码，我们就能够定义一个maven项目的POM，这体现了maven的一大优点，它能让项目对象模型最大程度地与实际代码相独立，也就是解耦。这样也避免了java代码与POM代码的相互影响。比如以后当项目需要升级版本的时候，我们只需要修改POM即可。</p>
<h2 id="主代码以及测试代码"><a href="#主代码以及测试代码" class="headerlink" title="主代码以及测试代码"></a>主代码以及测试代码</h2><p>项目的主代码和测试代码不用在于，主代码会被打包到最终的构件中(如jar)，而测试代码只是在运行测试时候用到，不会被打包。</p>
<p>一般来说，项目中的java类的包(package)都应该基于项目的groupId和artifactId，这样更加清晰，更加符合逻辑，也方便搜索构件或者java类。</p>
<p>主代码位于:/src/main/java目录下;测试代码位于:/src/test/java目录下；</p>
<h2 id="mvn命令"><a href="#mvn命令" class="headerlink" title="mvn命令"></a>mvn命令</h2><p>mvn clean　：清除maven的输出目录target</p>
<p>mvn compile :编译项目主代码，将项目主代码编译至target/classes目录中</p>
<p>mvn test-compile　：编译测试的内容</p>
<p>mvn test :运行测试(在运行测试之前会自动执行项目主资源处理，主代码编译，测试资源<br>处理，测试代码编译等工作)</p>
<p>mvn package :生成target目录，编译、测试代码，生成测试报告，生成jar/war文件；默认是jar文件，只打包主项目代码。</p>
<p>mvn install :在本地Repository中安装jar</p>
<p>mvn archetype:generate　：创建mvn项目(使用Archetype生成项目骨架)</p>
<p>mvn dependency:list :查看当前项目的已解析依赖</p>
<p>mvn dependency:tree :查看当前项目的依赖树(传递依赖的路径)</p>
<p>mvn dependency:analyze :帮助分析当前项目的依赖</p>
<h1 id="maven坐标"><a href="#maven坐标" class="headerlink" title="maven坐标"></a>maven坐标</h1><p>为了能够自动化解析任何一个java构件，maven就必须将他们唯一标识，这就依赖管理的底层基础－－坐标。maven定义了这样一组规则：世界上任何一个构件都可以使用maven坐标唯一标识，maven坐标的元素包括groupId,artifactId,version,packaging,classifier。</p>
<p>坐标元素介绍：</p>
<p>groupId:定义当前maven项目隶属的实际项目</p>
<p>artifactId：定义实际项目中的一个maven项目(模块)</p>
<p>version:定义maven项目的当前所处的版本</p>
<p>packaging:定义maven项目的打包方式，默认的打包方式是jar</p>
<p>classifier：用来帮助定义构建输出的一些附属构件。不能直接定义项目的classifier，因为附属构件不是项目默认生成的，而是由附件的插件帮助生成的</p>
<h1 id="maven依赖"><a href="#maven依赖" class="headerlink" title="maven依赖"></a>maven依赖</h1><p>根元素project下的dependencies可以包含一个或者多个dependency元素，以声明一个或者多个项目依赖。每个依赖可以包含的元素有：</p>
<p>groupId,artifactId和version:依赖的基本坐标，对于任何一个依赖来说，基本坐标是最重要的，maven根据坐标才能找到需要的依赖。</p>
<p>type:依赖的类型，对应于项目坐标定义的packaging。大部分情况下，该元素不必声明，默认为jar</p>
<p>scope:依赖的范围</p>
<p>optional:标记依赖是否可选</p>
<p>exclusions:用来排除传递性依赖</p>
<h2 id="依赖的范围"><a href="#依赖的范围" class="headerlink" title="依赖的范围"></a>依赖的范围</h2><p>依赖范围就是用来控制依赖与三种classpath(编译classpath,测试classpath,运行classpath)的关系:</p>
<p>compile:编译依赖范围。如果没有指定，就会默认是该范围。此范围的依赖对编译，测试，运行都有效。</p>
<p>test:测试依赖范围。只在测试是有效，在编译主代码或者运行项目的时候无法使用此类依赖。</p>
<p>provided:已提供依赖范围。对于编译和测试有效，但在运行时候无效。</p>
<p>runtime:运行时依赖范围。对于测试和运行时有效，但在编译主代码时无效。</p>
<h2 id="依赖的传递性"><a href="#依赖的传递性" class="headerlink" title="依赖的传递性"></a>依赖的传递性</h2><p>在使用其他依赖的构件的时候，不用去考虑它依赖了什么，也不用担心引入多余的依赖。maven会解析各个直接依赖的POM,将那些必要的间接依赖以传递性的形式引入到当前的项目中。</p>
<p>maven引入的传递性依赖机制，一方面大大简化和方便了依赖声明，另一方面，大部分情况下我们只需要关心项目的直接依赖是什么，而不用去考虑这些直接依赖会引入声明传递性依赖。</p>
<h2 id="依赖的调解"><a href="#依赖的调解" class="headerlink" title="依赖的调解"></a>依赖的调解</h2><p>比如，项目A有这样的依赖关系:A–B–C–X(1.0)，A–D–X(2.0)，这个时候X是A的传递性依赖。会选择哪个呢？根据maven的第一原则：路径最近者优先。选择X(2.0)；</p>
<p>那么，如果路径相同的呢？这时就用到了第二原则：第一声明者优先。也就是说，在依赖路径长度相等的时候，在POM中的依赖声明的顺序决定了谁会被使用。</p>
<h2 id="排除依赖"><a href="#排除依赖" class="headerlink" title="排除依赖"></a>排除依赖</h2><p>传递性依赖会给项目隐式地引入很多依赖，这极大地简化了项目依赖的管理，但是由于一些原因，不想引入某些传递性依赖。这个时候我们可以使用exclusions标签声明排除依赖，exclusions可以包含一个或者多个exclusion子元素，可以排除一个或者多个传递性依赖。</p>
<h1 id="maven仓库"><a href="#maven仓库" class="headerlink" title="maven仓库"></a>maven仓库</h1><h2 id="maven仓库简介"><a href="#maven仓库简介" class="headerlink" title="maven仓库简介"></a>maven仓库简介</h2><p>坐标和依赖是任何一个构件在maven世界中的逻辑表示方式，而构件的物理表示方式是文件，maven通过仓库来统一管理这些文件。实际的maven项目将不再各自存储其依赖文件，它们只需要声明这些依赖的坐标，在需要的时候,maven会自动根据坐标找到仓库中的构件，并使用它们。</p>
<h2 id="maven仓库分类"><a href="#maven仓库分类" class="headerlink" title="maven仓库分类"></a>maven仓库分类</h2><p>对于maven来说，仓库分为２大类：本地仓库与远程仓库。当maven根据坐标寻找构件的时候，它首先会查看本地仓库，如果本地仓库存在此构件，则直接使用。如果本地仓库不存在此构件，或者需要查看是否有更新的构件，maven就会去远程仓库查找，发现需要的构件之后，下载到本地仓库再使用。如果本地仓库与远程仓库都没有，则报错。</p>
<p>这里，需要说明私服。私服是一种特殊的远程仓库，为了节省带宽和时间，应该在局域网内架设一个私有的仓库服务器，用其代理所有外部的远程仓库。</p>
<p>如果默认的中央仓库无法满足项目的需求，可能项目需要的构件存在于另一个远程仓库中。这个时候可以在项目的POM文件中，repositories元素下使用repository子元素声明一个或者多个远程仓库。我们需要注意的是，maven默认的中央仓库的id是central。</p>
<h2 id="依赖坐标搜索"><a href="#依赖坐标搜索" class="headerlink" title="依赖坐标搜索"></a>依赖坐标搜索</h2><p>使用maven进行日常开发的时候，一个常见的问题就是如何寻找需要的依赖，我们可以通过需要使用的类库的名字来找到maven依赖所需的坐标。</p>
<p>我们可以直接去maven的官方网站的中央仓库搜索也可以通过其他的搜索服务，比如：</p>
<p>地址：<a href="http://repository.sonatype.org/" target="_blank" rel="external">http://repository.sonatype.org/</a></p>
<p>Nexus是当前流行的开源maven仓库管理软件，提供了关键字搜索，类名搜索，坐标搜索等功能。</p>
<h1 id="生命周期与插件"><a href="#生命周期与插件" class="headerlink" title="生命周期与插件"></a>生命周期与插件</h1><p>在maven的日常使用中，命令行的输入往往就对应了生命周期，如mvn package就表示执行默认生命周期阶段package。maven的生命周期是抽象的，其实际行为都由插件来完成，如package阶段的任务可能就就会由maven-jar-plugin完成。</p>
<p>maven的生命周期就是为了对所有的构建过程进行抽象统一，包含了项目的清理，初始化，编译，测试，打包，集成测试，验证，部署和站点生成等几乎所有的构建步骤。所有的项目构建都能够映射到这样一个生命周期上。在maven的设计中，实际的任务(如编译源代码)都交由插件了完成。</p>
<p>maven定义的生命周期和插件机制一方面保证了所有maven项目有一致的构建标准，另一方面又通过默认插件简化和稳定了实际项目的构建。此外，该机制还提供了足够的扩展空间，用户可以通过配置现有的插件或者自行编写插件来自定义构建行为。</p>
<h2 id="三套生命周期"><a href="#三套生命周期" class="headerlink" title="三套生命周期"></a>三套生命周期</h2><p>maven拥有三套互相独立的生命周期，分别是clean,default和site。需要注意的是，生命周期之间是互相独立的，生命周期中的各个阶段是前后依赖的。</p>
<h3 id="clean生命周期"><a href="#clean生命周期" class="headerlink" title="clean生命周期"></a>clean生命周期</h3><p>clean生命周期的目的是清理项目，它包含三个阶段：</p>
<ol>
<li><p>pre-clean 执行一些清理前需要完成的工作</p>
</li>
<li><p>clean 清理上一次构建生成的文件</p>
</li>
<li><p>post-clean 执行一些清理后需要完成的工作</p>
</li>
</ol>
<h3 id="default生命周期"><a href="#default生命周期" class="headerlink" title="default生命周期"></a>default生命周期</h3><p>default生命周期定义了真正构建时所需要执行的所有步骤，它是所有生命周期中最核心的部分。</p>
<p>这里只列举一些常见的阶段：(按照先后顺序)</p>
<p>compile:编译项目的主源码。一般来说，是编译src/main/java目录下的java文件至项目输出的主classpath目录中</p>
<p>test-compile:编译项目的测试代码。一般来说，是编译src/test/java目录下的java文件至项目输出的主classpath目录中</p>
<p>test:使用单元测试框架运行测试，测试代码不会被打包或部署</p>
<p>package:接受编译好的代码，打包成可发布的格式，如jar</p>
<p>install:将包安装到maven本地仓库</p>
<p>deploy:将最终的包复制到远程仓库</p>
<h3 id="site生命周期"><a href="#site生命周期" class="headerlink" title="site生命周期"></a>site生命周期</h3><p>site生命周期的目的是建立和发布项目站点，maven能够基于POM所包含的信息，自动生成一格友好的站点，方便团队交流和发布项目信息。</p>
<p>pre-site:执行一些在生成项目站点之前需要完成的工作</p>
<p>site:生成项目站点文档</p>
<p>post-site:执行一些在生成项目站点之后需要完成的工作</p>
<p>site-deploy:将生成的项目站点发布到服务器上</p>
<h2 id="插件目标"><a href="#插件目标" class="headerlink" title="插件目标"></a>插件目标</h2><p>我们知道，maven的核心仅仅定义了抽象的生命周期，具体的任务是交由插件完成的，插件以独立的构件形式存在。对于插件本身，为了能够复用代码，它往往能够完成多个任务，因此这些功能聚集在一个插件里，每个功能就是一个插件目标。</p>
<p>maven的生命周期与插件互相绑定，用以完成实际的构建任务。具体而言，是生命周期的阶段与插件的目标互相绑定，以完成某个具体的构建任务。</p>
<p>几乎所有maven插件的目标都有一些可配置的参数，可以通过POM文件的配置来调整参数。关于插件的文档信息，我们可以参考Apache的maven官方网站上去获取。</p>
<h1 id="聚合与继承"><a href="#聚合与继承" class="headerlink" title="聚合与继承"></a>聚合与继承</h1><p>在这个技术飞速发展的时代，各类用户对软件的要求越来越高，软件本身也变得越来越复杂。因此，软件设计人员往往会采用各种方式对软件划分模块，以得到更清晰的设计以及更高的重用性。当把maven应用到实际项目中的时候，也需要将项目分成不用的模块。maven的聚合特性能够把项目的各个模块聚合在一起构建，而maven的继承特性则能够帮助抽取各个模块中相同的　依赖和插件等配置，在简化POM的同时，还能促进各个模块配置的一致性。</p>
<h2 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h2><p>当我们希望一次性构建多个项目，而不是到多个模块的目录下分别运行mvn命令。这个时候，就需要maven的聚合。</p>
<p>为了能够使用一条命令就能构建多个模块，我们需要创建一个额外的模块(聚合模块)，然后通过该模块构建整个项目的所有模块。额外的聚合模块的POM特殊在于：</p>
<p>packaging标签的值为:POM。对于非聚合模块，他们的packaging默认为jar。</p>
<p>modules元素，这是实现聚合的核心配置。我们可以通过在一个打包方式为POM的maven项目中声明任意数量的module元素(需要被聚合的模块)来实现模块的聚合，每一个module的值都是一个当前的POM的相对目录(需要被聚合的模块的目录相对与当前聚合模块POM的相对目录)。</p>
<p>为了方便构建，通常将聚合模块放在项目目录的最顶层，其他模块则作为聚合模块的子目录存在。</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>maven里面的继承，准确的说是POM文件的继承。我们可以创建POM文件的父子结构，然后在父POM中声明一些配置提供给子POM继承，以实现”一处声明，多处使用”的目的。父POM的packaging为pom，这一点与聚合模块一样。</p>
<p>由于父模块只是为了帮助消除配置的重复，因此它本身不包含除POM之外的项目文件。</p>
<p>有了父模块，就需要让其他模块来继承它。子模块的POM中，使用parent元素来声明父模块，parent下的子元素groupId,artifactId,version指定了父模块的坐标，元素relativePath表示父模块POM的相对路径。当项目构建时，maven首先会根据ralativePath检查父模块的POM,如果找不到，再从本地仓库中查找。relativePath的默认值是 ../pom.xml　也就是说，maven默认父POM在上一层目录中。</p>
<h3 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h3><p>在POM文件中，依赖是可以被继承的。maven提供dependencyManagement元素既能让子模块继承到父模块的依赖配置，又能保证子模块依赖使用的灵活。在dependencyManagement元素下的依赖声明不会引入实际的依赖，不过它能够约束dependencies下依赖的使用。使用dependencyManagement声明的依赖，不会给子模块引入依赖，但是可以被继承。在子模块中只需要声明依赖的使用，如果子模块不声明依赖的使用，即使该依赖已经在父POM的dependencyManagement中声明了，也不会产生任何实际的效果。</p>
<p>在dependencyManagement元素中有import依赖范围，使用该范围的依赖通常指向一个POM,作用是将目标POM中的dependencyManagement配置导入并合并到当前POM的dependencyManagement元素中。这里import表示导入配置的意思。</p>
<h3 id="插件管理"><a href="#插件管理" class="headerlink" title="插件管理"></a>插件管理</h3><p>类似地，maven也提供了pluginManagement元素帮助管理插件，在该元素下配置的依赖不会造成实际的插件调用行为，当POM中配置了真正的plugin元素，并且其groupId,artifactId与pluginManagement中的插件匹配时，pluginManagement的配置才会影响实际的插件行为。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Maven/" rel="tag"><i class="fa fa-tag"></i> Maven</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/21/设计模式原则/" rel="next" title="设计模式原则">
                <i class="fa fa-chevron-left"></i> 设计模式原则
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/22/编辑距离问题/" rel="prev" title="编辑距离问题">
                编辑距离问题 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/author.jpg"
                alt="Lujunqiu" />
            
              <p class="site-author-name" itemprop="name">Lujunqiu</p>
              <p class="site-description motion-element" itemprop="description">大道唯有自成</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="mailto:26725432426@qq.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#简介"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是Maven"><span class="nav-number">1.1.</span> <span class="nav-text">什么是Maven</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven的安装-Ubantu"><span class="nav-number">1.2.</span> <span class="nav-text">Maven的安装(Ubantu)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maven的使用"><span class="nav-number">2.</span> <span class="nav-text">maven的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#POM文件"><span class="nav-number">2.1.</span> <span class="nav-text">POM文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主代码以及测试代码"><span class="nav-number">2.2.</span> <span class="nav-text">主代码以及测试代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mvn命令"><span class="nav-number">2.3.</span> <span class="nav-text">mvn命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maven坐标"><span class="nav-number">3.</span> <span class="nav-text">maven坐标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maven依赖"><span class="nav-number">4.</span> <span class="nav-text">maven依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#依赖的范围"><span class="nav-number">4.1.</span> <span class="nav-text">依赖的范围</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#依赖的传递性"><span class="nav-number">4.2.</span> <span class="nav-text">依赖的传递性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#依赖的调解"><span class="nav-number">4.3.</span> <span class="nav-text">依赖的调解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排除依赖"><span class="nav-number">4.4.</span> <span class="nav-text">排除依赖</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maven仓库"><span class="nav-number">5.</span> <span class="nav-text">maven仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#maven仓库简介"><span class="nav-number">5.1.</span> <span class="nav-text">maven仓库简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#maven仓库分类"><span class="nav-number">5.2.</span> <span class="nav-text">maven仓库分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#依赖坐标搜索"><span class="nav-number">5.3.</span> <span class="nav-text">依赖坐标搜索</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#生命周期与插件"><span class="nav-number">6.</span> <span class="nav-text">生命周期与插件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#三套生命周期"><span class="nav-number">6.1.</span> <span class="nav-text">三套生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#clean生命周期"><span class="nav-number">6.1.1.</span> <span class="nav-text">clean生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#default生命周期"><span class="nav-number">6.1.2.</span> <span class="nav-text">default生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#site生命周期"><span class="nav-number">6.1.3.</span> <span class="nav-text">site生命周期</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插件目标"><span class="nav-number">6.2.</span> <span class="nav-text">插件目标</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#聚合与继承"><span class="nav-number">7.</span> <span class="nav-text">聚合与继承</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#聚合"><span class="nav-number">7.1.</span> <span class="nav-text">聚合</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#继承"><span class="nav-number">7.2.</span> <span class="nav-text">继承</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#依赖管理"><span class="nav-number">7.2.1.</span> <span class="nav-text">依赖管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插件管理"><span class="nav-number">7.2.2.</span> <span class="nav-text">插件管理</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lujunqiu</span>

  
</div>


  <div class="powered-by">  个人博客</div>



  <span class="post-meta-divider">|</span>








<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">记录学习生活的点滴</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
